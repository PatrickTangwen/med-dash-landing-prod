{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetcher = void 0;\nconst form_data_1 = __importDefault(require(\"form-data\"));\nconst qs_1 = __importDefault(require(\"qs\"));\nif (typeof window === \"undefined\") {\n  global.fetch = require(\"node-fetch\");\n}\nconst INITIAL_RETRY_DELAY = 1;\nconst MAX_RETRY_DELAY = 60;\nconst DEFAULT_MAX_RETRIES = 2;\nfunction fetcherImpl(args) {\n  var _a, _b;\n  return __awaiter(this, void 0, void 0, function* () {\n    const headers = {};\n    if (args.body !== undefined && args.contentType != null) {\n      headers[\"Content-Type\"] = args.contentType;\n    }\n    if (args.headers != null) {\n      for (const [key, value] of Object.entries(args.headers)) {\n        if (value != null) {\n          headers[key] = value;\n        }\n      }\n    }\n    const url = Object.keys((_a = args.queryParameters) !== null && _a !== void 0 ? _a : {}).length > 0 ? `${args.url}?${qs_1.default.stringify(args.queryParameters, {\n      arrayFormat: \"repeat\"\n    })}` : args.url;\n    let body = undefined;\n    if (args.body instanceof form_data_1.default) {\n      // @ts-expect-error\n      body = args.body;\n    } else {\n      body = JSON.stringify(args.body);\n    }\n    const makeRequest = () => __awaiter(this, void 0, void 0, function* () {\n      const controller = new AbortController();\n      let abortId = undefined;\n      if (args.timeoutMs != null) {\n        abortId = setTimeout(() => controller.abort(), args.timeoutMs);\n      }\n      const response = yield fetch(url, {\n        method: args.method,\n        headers,\n        body,\n        signal: controller.signal,\n        credentials: args.withCredentials ? \"same-origin\" : undefined\n      });\n      if (abortId != null) {\n        clearTimeout(abortId);\n      }\n      return response;\n    });\n    try {\n      let response = yield makeRequest();\n      for (let i = 0; i < ((_b = args.maxRetries) !== null && _b !== void 0 ? _b : DEFAULT_MAX_RETRIES); ++i) {\n        if (response.status === 408 || response.status === 409 || response.status === 429 || response.status >= 500) {\n          const delay = Math.min(INITIAL_RETRY_DELAY * Math.pow(i, 2), MAX_RETRY_DELAY);\n          yield new Promise(resolve => setTimeout(resolve, delay));\n          response = yield makeRequest();\n        } else {\n          break;\n        }\n      }\n      let body;\n      if (response.body != null && args.responseType === \"blob\") {\n        body = yield response.blob();\n      } else if (response.body != null && args.responseType === \"streaming\") {\n        body = response.body;\n      } else if (response.body != null) {\n        try {\n          body = yield response.json();\n        } catch (err) {\n          return {\n            ok: false,\n            error: {\n              reason: \"non-json\",\n              statusCode: response.status,\n              rawBody: yield response.text()\n            }\n          };\n        }\n      }\n      if (response.status >= 200 && response.status < 400) {\n        return {\n          ok: true,\n          body: body,\n          headers: response.headers\n        };\n      } else {\n        return {\n          ok: false,\n          error: {\n            reason: \"status-code\",\n            statusCode: response.status,\n            body\n          }\n        };\n      }\n    } catch (error) {\n      if (error instanceof Error && error.name === \"AbortError\") {\n        return {\n          ok: false,\n          error: {\n            reason: \"timeout\"\n          }\n        };\n      } else if (error instanceof Error) {\n        return {\n          ok: false,\n          error: {\n            reason: \"unknown\",\n            errorMessage: error.message\n          }\n        };\n      }\n      return {\n        ok: false,\n        error: {\n          reason: \"unknown\",\n          errorMessage: JSON.stringify(error)\n        }\n      };\n    }\n  });\n}\nexports.fetcher = fetcherImpl;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","Object","defineProperty","exports","fetcher","form_data_1","require","qs_1","window","global","fetch","INITIAL_RETRY_DELAY","MAX_RETRY_DELAY","DEFAULT_MAX_RETRIES","fetcherImpl","args","_a","_b","headers","body","undefined","contentType","key","entries","url","keys","queryParameters","length","default","stringify","arrayFormat","JSON","makeRequest","controller","AbortController","abortId","timeoutMs","setTimeout","abort","response","method","signal","credentials","withCredentials","clearTimeout","i","maxRetries","status","delay","Math","min","pow","responseType","blob","json","err","ok","error","reason","statusCode","rawBody","text","Error","name","errorMessage","message"],"sources":["/Users/tangwenhua/Desktop/dsc180-product/med-dash-landing-prod/node_modules/@tryvital/vital-node/core/fetcher/Fetcher.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetcher = void 0;\nconst form_data_1 = __importDefault(require(\"form-data\"));\nconst qs_1 = __importDefault(require(\"qs\"));\nif (typeof window === \"undefined\") {\n    global.fetch = require(\"node-fetch\");\n}\nconst INITIAL_RETRY_DELAY = 1;\nconst MAX_RETRY_DELAY = 60;\nconst DEFAULT_MAX_RETRIES = 2;\nfunction fetcherImpl(args) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = {};\n        if (args.body !== undefined && args.contentType != null) {\n            headers[\"Content-Type\"] = args.contentType;\n        }\n        if (args.headers != null) {\n            for (const [key, value] of Object.entries(args.headers)) {\n                if (value != null) {\n                    headers[key] = value;\n                }\n            }\n        }\n        const url = Object.keys((_a = args.queryParameters) !== null && _a !== void 0 ? _a : {}).length > 0\n            ? `${args.url}?${qs_1.default.stringify(args.queryParameters, { arrayFormat: \"repeat\" })}`\n            : args.url;\n        let body = undefined;\n        if (args.body instanceof form_data_1.default) {\n            // @ts-expect-error\n            body = args.body;\n        }\n        else {\n            body = JSON.stringify(args.body);\n        }\n        const makeRequest = () => __awaiter(this, void 0, void 0, function* () {\n            const controller = new AbortController();\n            let abortId = undefined;\n            if (args.timeoutMs != null) {\n                abortId = setTimeout(() => controller.abort(), args.timeoutMs);\n            }\n            const response = yield fetch(url, {\n                method: args.method,\n                headers,\n                body,\n                signal: controller.signal,\n                credentials: args.withCredentials ? \"same-origin\" : undefined,\n            });\n            if (abortId != null) {\n                clearTimeout(abortId);\n            }\n            return response;\n        });\n        try {\n            let response = yield makeRequest();\n            for (let i = 0; i < ((_b = args.maxRetries) !== null && _b !== void 0 ? _b : DEFAULT_MAX_RETRIES); ++i) {\n                if (response.status === 408 ||\n                    response.status === 409 ||\n                    response.status === 429 ||\n                    response.status >= 500) {\n                    const delay = Math.min(INITIAL_RETRY_DELAY * Math.pow(i, 2), MAX_RETRY_DELAY);\n                    yield new Promise((resolve) => setTimeout(resolve, delay));\n                    response = yield makeRequest();\n                }\n                else {\n                    break;\n                }\n            }\n            let body;\n            if (response.body != null && args.responseType === \"blob\") {\n                body = yield response.blob();\n            }\n            else if (response.body != null && args.responseType === \"streaming\") {\n                body = response.body;\n            }\n            else if (response.body != null) {\n                try {\n                    body = yield response.json();\n                }\n                catch (err) {\n                    return {\n                        ok: false,\n                        error: {\n                            reason: \"non-json\",\n                            statusCode: response.status,\n                            rawBody: yield response.text(),\n                        },\n                    };\n                }\n            }\n            if (response.status >= 200 && response.status < 400) {\n                return {\n                    ok: true,\n                    body: body,\n                    headers: response.headers,\n                };\n            }\n            else {\n                return {\n                    ok: false,\n                    error: {\n                        reason: \"status-code\",\n                        statusCode: response.status,\n                        body,\n                    },\n                };\n            }\n        }\n        catch (error) {\n            if (error instanceof Error && error.name === \"AbortError\") {\n                return {\n                    ok: false,\n                    error: {\n                        reason: \"timeout\",\n                    },\n                };\n            }\n            else if (error instanceof Error) {\n                return {\n                    ok: false,\n                    error: {\n                        reason: \"unknown\",\n                        errorMessage: error.message,\n                    },\n                };\n            }\n            return {\n                ok: false,\n                error: {\n                    reason: \"unknown\",\n                    errorMessage: JSON.stringify(error),\n                },\n            };\n        }\n    });\n}\nexports.fetcher = fetcherImpl;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAACC,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYH,CAAC,GAAGG,KAAK,GAAG,IAAIH,CAAC,CAAC,UAAUI,OAAO,EAAE;MAAEA,OAAO,CAACD,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAO,CAAC,EAAE,UAAUD,OAAO,EAAEE,MAAM,EAAE;IACvD,SAASC,SAASA,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAACQ,IAAI,CAACN,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQA,CAACR,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAIA,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACT,KAAK,CAAC,GAAGD,KAAK,CAACU,MAAM,CAACT,KAAK,CAAC,CAACW,IAAI,CAACP,SAAS,EAAEI,QAAQ,CAAC;IAAE;IAC7GH,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAK,CAACjB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAEU,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,IAAIO,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUC,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAElB,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DkB,OAAO,CAACC,OAAO,GAAG,KAAK,CAAC;AACxB,MAAMC,WAAW,GAAGP,eAAe,CAACQ,OAAO,CAAC,WAAW,CAAC,CAAC;AACzD,MAAMC,IAAI,GAAGT,eAAe,CAACQ,OAAO,CAAC,IAAI,CAAC,CAAC;AAC3C,IAAI,OAAOE,MAAM,KAAK,WAAW,EAAE;EAC/BC,MAAM,CAACC,KAAK,GAAGJ,OAAO,CAAC,YAAY,CAAC;AACxC;AACA,MAAMK,mBAAmB,GAAG,CAAC;AAC7B,MAAMC,eAAe,GAAG,EAAE;AAC1B,MAAMC,mBAAmB,GAAG,CAAC;AAC7B,SAASC,WAAWA,CAACC,IAAI,EAAE;EACvB,IAAIC,EAAE,EAAEC,EAAE;EACV,OAAOtC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;IAChD,MAAMuC,OAAO,GAAG,CAAC,CAAC;IAClB,IAAIH,IAAI,CAACI,IAAI,KAAKC,SAAS,IAAIL,IAAI,CAACM,WAAW,IAAI,IAAI,EAAE;MACrDH,OAAO,CAAC,cAAc,CAAC,GAAGH,IAAI,CAACM,WAAW;IAC9C;IACA,IAAIN,IAAI,CAACG,OAAO,IAAI,IAAI,EAAE;MACtB,KAAK,MAAM,CAACI,GAAG,EAAErC,KAAK,CAAC,IAAIgB,MAAM,CAACsB,OAAO,CAACR,IAAI,CAACG,OAAO,CAAC,EAAE;QACrD,IAAIjC,KAAK,IAAI,IAAI,EAAE;UACfiC,OAAO,CAACI,GAAG,CAAC,GAAGrC,KAAK;QACxB;MACJ;IACJ;IACA,MAAMuC,GAAG,GAAGvB,MAAM,CAACwB,IAAI,CAAC,CAACT,EAAE,GAAGD,IAAI,CAACW,eAAe,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,CAAC,CAAC,CAACW,MAAM,GAAG,CAAC,GAC5F,GAAEZ,IAAI,CAACS,GAAI,IAAGjB,IAAI,CAACqB,OAAO,CAACC,SAAS,CAACd,IAAI,CAACW,eAAe,EAAE;MAAEI,WAAW,EAAE;IAAS,CAAC,CAAE,EAAC,GACxFf,IAAI,CAACS,GAAG;IACd,IAAIL,IAAI,GAAGC,SAAS;IACpB,IAAIL,IAAI,CAACI,IAAI,YAAYd,WAAW,CAACuB,OAAO,EAAE;MAC1C;MACAT,IAAI,GAAGJ,IAAI,CAACI,IAAI;IACpB,CAAC,MACI;MACDA,IAAI,GAAGY,IAAI,CAACF,SAAS,CAACd,IAAI,CAACI,IAAI,CAAC;IACpC;IACA,MAAMa,WAAW,GAAGA,CAAA,KAAMrD,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MACnE,MAAMsD,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;MACxC,IAAIC,OAAO,GAAGf,SAAS;MACvB,IAAIL,IAAI,CAACqB,SAAS,IAAI,IAAI,EAAE;QACxBD,OAAO,GAAGE,UAAU,CAAC,MAAMJ,UAAU,CAACK,KAAK,CAAC,CAAC,EAAEvB,IAAI,CAACqB,SAAS,CAAC;MAClE;MACA,MAAMG,QAAQ,GAAG,MAAM7B,KAAK,CAACc,GAAG,EAAE;QAC9BgB,MAAM,EAAEzB,IAAI,CAACyB,MAAM;QACnBtB,OAAO;QACPC,IAAI;QACJsB,MAAM,EAAER,UAAU,CAACQ,MAAM;QACzBC,WAAW,EAAE3B,IAAI,CAAC4B,eAAe,GAAG,aAAa,GAAGvB;MACxD,CAAC,CAAC;MACF,IAAIe,OAAO,IAAI,IAAI,EAAE;QACjBS,YAAY,CAACT,OAAO,CAAC;MACzB;MACA,OAAOI,QAAQ;IACnB,CAAC,CAAC;IACF,IAAI;MACA,IAAIA,QAAQ,GAAG,MAAMP,WAAW,CAAC,CAAC;MAClC,KAAK,IAAIa,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC5B,EAAE,GAAGF,IAAI,CAAC+B,UAAU,MAAM,IAAI,IAAI7B,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGJ,mBAAmB,CAAC,EAAE,EAAEgC,CAAC,EAAE;QACpG,IAAIN,QAAQ,CAACQ,MAAM,KAAK,GAAG,IACvBR,QAAQ,CAACQ,MAAM,KAAK,GAAG,IACvBR,QAAQ,CAACQ,MAAM,KAAK,GAAG,IACvBR,QAAQ,CAACQ,MAAM,IAAI,GAAG,EAAE;UACxB,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAG,CAACvC,mBAAmB,GAAGsC,IAAI,CAACE,GAAG,CAACN,CAAC,EAAE,CAAC,CAAC,EAAEjC,eAAe,CAAC;UAC7E,MAAM,IAAIzB,OAAO,CAAED,OAAO,IAAKmD,UAAU,CAACnD,OAAO,EAAE8D,KAAK,CAAC,CAAC;UAC1DT,QAAQ,GAAG,MAAMP,WAAW,CAAC,CAAC;QAClC,CAAC,MACI;UACD;QACJ;MACJ;MACA,IAAIb,IAAI;MACR,IAAIoB,QAAQ,CAACpB,IAAI,IAAI,IAAI,IAAIJ,IAAI,CAACqC,YAAY,KAAK,MAAM,EAAE;QACvDjC,IAAI,GAAG,MAAMoB,QAAQ,CAACc,IAAI,CAAC,CAAC;MAChC,CAAC,MACI,IAAId,QAAQ,CAACpB,IAAI,IAAI,IAAI,IAAIJ,IAAI,CAACqC,YAAY,KAAK,WAAW,EAAE;QACjEjC,IAAI,GAAGoB,QAAQ,CAACpB,IAAI;MACxB,CAAC,MACI,IAAIoB,QAAQ,CAACpB,IAAI,IAAI,IAAI,EAAE;QAC5B,IAAI;UACAA,IAAI,GAAG,MAAMoB,QAAQ,CAACe,IAAI,CAAC,CAAC;QAChC,CAAC,CACD,OAAOC,GAAG,EAAE;UACR,OAAO;YACHC,EAAE,EAAE,KAAK;YACTC,KAAK,EAAE;cACHC,MAAM,EAAE,UAAU;cAClBC,UAAU,EAAEpB,QAAQ,CAACQ,MAAM;cAC3Ba,OAAO,EAAE,MAAMrB,QAAQ,CAACsB,IAAI,CAAC;YACjC;UACJ,CAAC;QACL;MACJ;MACA,IAAItB,QAAQ,CAACQ,MAAM,IAAI,GAAG,IAAIR,QAAQ,CAACQ,MAAM,GAAG,GAAG,EAAE;QACjD,OAAO;UACHS,EAAE,EAAE,IAAI;UACRrC,IAAI,EAAEA,IAAI;UACVD,OAAO,EAAEqB,QAAQ,CAACrB;QACtB,CAAC;MACL,CAAC,MACI;QACD,OAAO;UACHsC,EAAE,EAAE,KAAK;UACTC,KAAK,EAAE;YACHC,MAAM,EAAE,aAAa;YACrBC,UAAU,EAAEpB,QAAQ,CAACQ,MAAM;YAC3B5B;UACJ;QACJ,CAAC;MACL;IACJ,CAAC,CACD,OAAOsC,KAAK,EAAE;MACV,IAAIA,KAAK,YAAYK,KAAK,IAAIL,KAAK,CAACM,IAAI,KAAK,YAAY,EAAE;QACvD,OAAO;UACHP,EAAE,EAAE,KAAK;UACTC,KAAK,EAAE;YACHC,MAAM,EAAE;UACZ;QACJ,CAAC;MACL,CAAC,MACI,IAAID,KAAK,YAAYK,KAAK,EAAE;QAC7B,OAAO;UACHN,EAAE,EAAE,KAAK;UACTC,KAAK,EAAE;YACHC,MAAM,EAAE,SAAS;YACjBM,YAAY,EAAEP,KAAK,CAACQ;UACxB;QACJ,CAAC;MACL;MACA,OAAO;QACHT,EAAE,EAAE,KAAK;QACTC,KAAK,EAAE;UACHC,MAAM,EAAE,SAAS;UACjBM,YAAY,EAAEjC,IAAI,CAACF,SAAS,CAAC4B,KAAK;QACtC;MACJ,CAAC;IACL;EACJ,CAAC,CAAC;AACN;AACAtD,OAAO,CAACC,OAAO,GAAGU,WAAW","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}